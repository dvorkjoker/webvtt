<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WEBVTT to Plain Text Converter</title>
</head>
<body>
    <h1>WEBVTT to Plain Text Converter</h1>

    <!-- File Upload -->
    <input type="file" id="fileInput" accept=".vtt">
    <br>
    <a id="downloadLink" style="display:none;">Download Converted Text</a>

    <script>
        document.getElementById('fileInput').addEventListener('change', handleFileUpload);

        function handleFileUpload(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function(e) {
                const content = e.target.result;
                const plainText = convertToPlainText(content);
                
                // Create a downloadable file
                const blob = new Blob([plainText], { type: 'text/plain' });
                const downloadLink = document.getElementById('downloadLink');
                downloadLink.href = URL.createObjectURL(blob);
                downloadLink.download = file.name.replace(/\.vtt$/, '.txt');
                downloadLink.style.display = 'inline';
                downloadLink.textContent = 'Download Converted Text';
            };

            reader.readAsText(file);
        }

        function convertToPlainText(content) {
            const lines = content.split('\n');
            return lines
                .filter(line => line.trim() && !line.startsWith('WEBVTT') && !line.match(/^[0-9]+$/) && !line.includes('-->'))
                .join('\n');
        }
    </script>
</body>
</html>
